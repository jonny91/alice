C51 COMPILER V9.02   MAIN                                                                  04/29/2016 01:25:12 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <STC/STC12C5A60S2.H>
   2          #include <common.h>
   3          #include "uart.h"
   4          #include "mp3.h"
   5          
   6          sbit STEP_0_SIGNAL = P0^5;      //第一关开启 关门
   7          sbit STEP_1_SIGNAL = P0^0;        //第一关完成
   8          sbit STEP_2_SIGNAL = P0^4;         //第二个完成 霍尔开关的接入
   9          sbit STEP_5_LINE_SIGNAL = P4^0; //16个点连线接入
  10          sbit STEP_5_TO_6_DOOR =  P4^2; //第五关完成的电磁锁 
  11          //当前的步骤 没有参与过 = 0
  12          signed char step = 0;
  13          
  14          void playStep3();
  15          
  16          void main()
  17          {
  18   1              sys_init();
  19   1              mp3_init();
  20   1              
  21   1              while(1)
  22   1              {
  23   2                      if(step == 0)
  24   2                      {
  25   3                              if(STEP_0_SIGNAL == 1) //门关了 
  26   3                              {
  27   4                                      step = 2; 
  28   4                                      delay_ms(5000);
  29   4                                      
  30   4                                      playMp3(0x00,0x01);        //播放第一个文件夹的第一个音乐
  31   4                              } 
  32   3                      }
  33   2                      //第一关由敲门开关控制 直接就算完成了 
  34   2                      if(step == 2)  //机关4
  35   2                      {
  36   3                              if(STEP_2_SIGNAL == 1) //霍尔开关 
  37   3                              {
  38   4                                      step = 5; //进去第5个谜题 
  39   4                                      
  40   4                                      delay_ms(5000);
  41   4                                      playMp3(0x00,0x02);
  42   4                              }
  43   3                      }
  44   2                      
  45   2                      if(step == 5) //机关5 接电线 
  46   2                      {
  47   3                              if(STEP_5_LINE_SIGNAL == 1)
  48   3                              {
  49   4                                      delay_ms(500);
  50   4                                      if(STEP_5_LINE_SIGNAL == 1) //接线成功 第5关完成 
  51   4                                      {
  52   5                                              step = 6;
  53   5                                              playMp3(0x00,0x02);
  54   5                                              STEP_5_TO_6_DOOR = 0; //电磁锁开门 
  55   5                                      }
C51 COMPILER V9.02   MAIN                                                                  04/29/2016 01:25:12 PAGE 2   

  56   4                              } 
  57   3                      } 
  58   2              }
  59   1      }
  60          
  61          //初始化所有口
  62          void INIT_COM()
  63          {
  64   1              
  65   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    486    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
